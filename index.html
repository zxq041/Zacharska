<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Centrum nieruchomości - Zacharska Klaudia</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .scrollbar-none::-webkit-scrollbar { display: none; }
    .scrollbar-none { -ms-overflow-style: none; scrollbar-width: none; }
    .line-button{align-items:center;background-color:#2563eb;color:#fff;cursor:pointer;display:inline-flex;font-family:ui-sans-serif,system-ui,-apple-system,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:600;line-height:1.5;text-decoration:none;text-transform:uppercase;letter-spacing:.05em;outline:0;border:0;padding:1rem 2rem;border-radius:9999px;transition:background-color .3s ease-in-out}
    .line-button:before{background-color:#fff;content:"";display:inline-block;height:2px;margin-right:12px;transition:all .42s cubic-bezier(.25,.8,.25,1);width:0}
    .line-button:hover{background-color:#1d4ed8}
    .line-button:hover:before{background-color:#fff;width:2.5rem}
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useRef, useState } = React;

    // ---------- UTILITIES ----------
    const cn = (...classes) => classes.filter(Boolean).join(' ');
    const currency = (n) => new Intl.NumberFormat("pl-PL", { style: "currency", currency: "PLN", maximumFractionDigits: 0 }).format(n);
    const useLocalStorage = (key, initial) => {
      const [state, setState] = useState(() => {
        try { const raw = localStorage.getItem(key); return raw ? JSON.parse(raw) : initial } catch { return initial }
      });
      useEffect(() => { try { localStorage.setItem(key, JSON.stringify(state)) } catch {} }, [key, state]);
      return [state, setState];
    };

    // API helpers
    const api = {
      async list(params={}) {
        const q = new URLSearchParams(params).toString();
        const r = await fetch(`/api/listings${q?`?${q}`:""}`); return r.json();
      },
      imageUrl(id){ return `/api/images/${id}`; }
    };

    // ---------- ICONS ----------
    const Icon = ({ name, className }) => {
      const icons = {
        MapPin: <><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" /><circle cx="12" cy="10" r="3" /></>,
        Phone: <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />,
        Mail: <><rect width="20" height="16" x="2" y="4" rx="2" /><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" /></>,
        Menu: <><line x1="4" x2="20" y1="12" y2="12" /><line x1="4" x2="20" y1="6" y2="6" /><line x1="4" x2="20" y1="18" y2="18" /></>,
        Star: <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />,
        Heart: <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />,
        ChevronLeft: <path d="m15 18-6-6 6-6" />,
        ChevronRight: <path d="m9 18 6-6-6-6" />,
        Facebook: <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" />,
        Instagram: <><rect width="20" height="20" x="2" y="2" rx="5" ry="5" /><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" /><line x1="17.5" x2="17.51" y1="6.5" y2="6.5" /></>,
        Youtube: <><path d="M2.5 17a24.12 24.12 0 0 1 0-10C2.5 4.24 4.24 2.5 7 2.5h10c2.76 0 4.5 1.74 4.5 4.5s0 10 0 10c0 2.76-1.74 4.5-4.5 4.5H7c-2.76 0-4.5-1.74-4.5-4.5Z" /><path d="m10 15 5-3-5-3z" /></>,
        Languages: <><path d="m5 8 6 6" /><path d="m4 14 6-6 2-3" /><path d="M2 5h12" /><path d="M7 2h1" /><path d="m22 22-5-10-5 10" /><path d="M14 18h6" /></>,
        LogIn: <><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" /><polyline points="10 17 15 12 10 7" /><line x1="15" x2="3" y1="12" y2="12" /></>,
        LogOut: <><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" /><polyline points="16 17 21 12 16 7" /><line x1="21" x2="9" y1="12" y2="12" /></>,
        UserPlus: <><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><line x1="19" x2="19" y1="8" y2="14" /><line x1="22" x2="16" y1="11" y2="11" /></>,
        Loader2: <path d="M21 12a9 9 0 1 1-6.219-8.56" />,
      };
      return <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={cn("h-4 w-4", className)}>{icons[name]}</svg>;
    };

    // ---------- UI ----------
    const Button = ({ variant = 'default', size = 'default', className, children, ...props }) => {
      const variants = { 
        default: "bg-blue-600 text-white hover:bg-blue-700",
        destructive: "bg-red-500 text-white hover:bg-red-600", 
        outline: "border border-zinc-200 bg-transparent hover:bg-blue-50",
        secondary: "bg-blue-100 text-blue-800 hover:bg-blue-200",
        ghost: "hover:bg-blue-100",
        link: "text-blue-600 underline-offset-4 hover:underline",
      };
      const sizes = { default: "h-10 px-4 py-2", sm: "h-9 rounded-md px-3", lg: "h-11 rounded-md px-8", icon: "h-10 w-10", };
      return <button className={cn("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors disabled:opacity-50 disabled:pointer-events-none", variants[variant], sizes[size], className)} {...props}>{children}</button>;
    };
    const Card = ({ className, children }) => <div className={cn("rounded-lg border bg-card text-card-foreground shadow-sm", className)}>{children}</div>;
    const CardHeader = ({ className, children }) => <div className={cn("flex flex-col space-y-1.5 p-6", className)}>{children}</div>;
    const CardTitle = ({ className, children }) => <h3 className={cn("text-2xl font-semibold leading-none tracking-tight", className)}>{children}</h3>;
    const CardContent = ({ className, children }) => <div className={cn("p-6 pt-0", className)}>{children}</div>;
    const Input = ({ className, ...props }) => <input className={cn("flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:cursor-not-allowed disabled:opacity-50", className)} {...props} />;

    // ---------- TEXTS ----------
    const dict = {
      pl: { nav: ["Oferty", "O nas", "Opinie", "Kontakt"], cta: "Umów spotkanie", heroTitle: "Znajdź swoje wymarzone miejsce z nami", heroCTA: "Przeglądaj oferty", bestOffers: "Najlepsze propozycje", shorts: "Wideo | Reels", about: "O nas", story: "Od lat łączymy ludzi z nieruchomościami premium. Zespół doświadczonych doradców, nowoczesne narzędzia i pełna transparentność.", values: ["Zaufanie", "Profesjonalizm", "Doświadczenie", "Innowacja"], testimonials: "Opinie klientów", contact: "Kontakt", allOffers: "Wszystkie Oferty", form: { name: "Imię i nazwisko", email: "Email", msg: "Wiadomość", send: "Wyślij", phone: "Numer telefonu", subject: "Temat wiadomości", consent: "Wyrażam zgodę na przetwarzanie moich danych osobowych." }, login: { login: "Zaloguj", register: "Rejestracja" } },
      en: { nav: ["Listings", "About", "Reviews", "Contact"], cta: "Book a meeting", heroTitle: "Find your dream place with us", heroCTA: "Browse listings", bestOffers: "Top picks", shorts: "Video | Reels", about: "About us", story: "For years we’ve been connecting people with premium properties. Expert advisors, modern tools and full transparency.", values: ["Trust", "Professionalism", "Experience", "Innovation"], testimonials: "Client reviews", contact: "Contact", allOffers: "All Listings", form: { name: "Full name", email: "Email", msg: "Message", send: "Send", phone: "Phone number", subject: "Subject", consent: "I agree to the processing of my personal data." }, login: { login: "Login", register: "Register" } }
    };

    // ---------- APP ----------
    function App() {
      const [lang, setLang] = useState("pl");
      const t = dict[lang];
      const [menuOpen, setMenuOpen] = useState(false);
      const [authed, setAuthed] = useLocalStorage("auth", { logged: false, name: "" });
      const [favs, setFavs] = useLocalStorage("favs", []);
      const toggleFav = (id) => setFavs((prev) => (prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]));

      return (
        <div className="min-h-screen bg-gradient-to-b from-blue-50 via-white to-blue-50 text-zinc-900 selection:bg-blue-200 selection:text-blue-900">
          <Header t={t} lang={lang} setLang={setLang} authed={authed} setAuthed={setAuthed} menuOpen={menuOpen} setMenuOpen={setMenuOpen} />
          <main>
            <Hero t={t} />
            <BestOffers t={t} favs={favs} toggleFav={toggleFav} />
            <Shorts t={t} />
            <About t={t} />
            <Testimonials t={t} />
            <Contact t={t} />
          </main>
          <Footer />
        </div>
      );
    }

    // ---------- HEADER ----------
    function Header({ lang, setLang, t, authed, setAuthed, menuOpen, setMenuOpen }) {
      return (
        <header className="sticky top-0 z-50 backdrop-blur-xl bg-white/60 border-b border-zinc-200/70">
          <div className="mx-auto max-w-7xl px-4 py-3 flex items-center justify-between">
            <a href="index.html" className="flex items-center gap-3">
              <img src="https://i.imgur.com/UwnwhuV.png" alt="Centrum nieruchomości Logo" className="h-12 w-12" />
              <div>
                <div className="font-semibold tracking-tight">Centrum nieruchomości</div>
                <div className="text-xs text-zinc-600">Zacharska Klaudia</div>
              </div>
            </a>
            <nav className="hidden md:flex items-center gap-6 text-sm">
              {t.nav.map((item, index) => (
                <a key={index} href={`#${['offers', 'about', 'testimonials', 'contact'][index]}`} className="relative py-1.5 after:content-[''] after:absolute after:left-0 after:bottom-0 after:w-0 after:h-0.5 after:bg-blue-600 after:transition-all after:duration-250 hover:after:w-full">{item}</a>
              ))}
              <a href="oferty.html">
                <Button variant="secondary" className="shadow-sm">{t.allOffers}</Button>
              </a>
              <LangToggle lang={lang} setLang={setLang} />
            </nav>
            <div className="md:hidden flex items-center gap-2">
              <LangToggle lang={lang} setLang={setLang} />
              <Button variant="outline" size="icon" className="rounded-xl" onClick={() => setMenuOpen(!menuOpen)}><Icon name="Menu" className="h-5 w-5"/></Button>
            </div>
          </div>
        </header>
      );
    }
    const LangToggle = ({ lang, setLang }) => <Button variant="ghost" className="gap-2" onClick={() => setLang(lang === "pl" ? "en" : "pl")}> <Icon name="Languages" /> {lang.toUpperCase()}</Button>;

    // ---------- HERO ----------
    function Hero({ t }) {
      return (
        <section className="w-full" id="hero">
          <div className="mx-auto max-w-7xl px-4 py-20 lg:py-24 grid lg:grid-cols-2 gap-12 items-center">
            <div className="text-center lg:text-left">
              <h1 className="text-zinc-900 text-4xl md:text-6xl font-semibold tracking-tight">
                Znajdź swoje <span className="text-blue-600">wymarzone miejsce</span> z nami
              </h1>
              <p className="mt-4 text-lg text-zinc-600">Specjalizujemy się w nieruchomościach premium, oferując profesjonalne doradztwo i dostęp do wyjątkowych ofert na rynku.</p>
              <div className="mt-8 flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4">
                <a href="oferty.html" className="line-button">{t.heroCTA}</a>
                <Button variant="outline" size="lg" className="rounded-full px-8 py-6 text-base">{t.cta}</Button>
              </div>
            </div>
            <div className="flex items-center justify-center">
              <div className="relative w-full max-w-xl">
                <div className="absolute -inset-2 bg-gradient-to-br from-blue-200 to-blue-400 rounded-3xl opacity-50 blur-xl"></div>
                <img src="https://i.imgur.com/CcxoJP0.png" alt="Luksusowy salon z widokiem na miasto" className="relative w-full h-auto object-cover rounded-3xl shadow-2xl"/>
              </div>
            </div>
          </div>
        </section>
      );
    }

    // ---------- BEST OFFERS (z API) ----------
    function BestOffers({ t, favs, toggleFav }) {
      const containerRef = useRef(null);
      const [items, setItems] = useState([]);
      const scrollTo = (dir) => {
        const el = containerRef.current; if (!el) return;
        const w = el.clientWidth;
        el.scrollTo({ left: el.scrollLeft + (dir === "left" ? -w : w), behavior: "smooth" });
      };
      useEffect(() => { (async ()=>{
        const rows = await api.list(); // najnowsze z serwera
        setItems(rows.slice(0,9));
      })(); }, []);
      return (
        <section id="offers" className="w-full py-20">
          <div className="mx-auto max-w-7xl px-4 flex flex-col items-center text-center gap-4">
            <div>
              <h2 className="text-3xl md:text-4xl font-semibold tracking-tight">{t.bestOffers}</h2>
              <p className="text-zinc-600 mt-2">Wyselekcjonowane nieruchomości premium</p>
            </div>
            <div className="flex gap-2">
              <Button variant="outline" size="icon" onClick={() => scrollTo("left")} className="rounded-xl"><Icon name="ChevronLeft" /></Button>
              <Button variant="outline" size="icon" onClick={() => scrollTo("right")} className="rounded-xl"><Icon name="ChevronRight" /></Button>
            </div>
          </div>
          <div ref={containerRef} className="mt-8 overflow-x-auto scrollbar-none px-4 -mx-4">
            <div className="grid grid-flow-col auto-cols-[85%] md:auto-cols-[33%] gap-6 px-4">
              {items.map((item) => <OfferCard key={item.id} data={item} fav={favs.includes(item.id)} onFav={(e) => {e.stopPropagation(); toggleFav(item.id);}} />)}
            </div>
          </div>
        </section>
      );
    }

    function OfferCard({ data, fav, onFav }) {
      return (
        <div className="relative group">
          <Card className="overflow-hidden rounded-3xl border-zinc-200/70 bg-white/80 backdrop-blur-xl shadow-[0_20px_60px_-25px_rgba(0,0,0,0.15)] transition-transform duration-300 group-hover:-translate-y-1">
            <div className="relative h-56">
              {data.thumb_image_id ? (
                <img src={`/api/images/${data.thumb_image_id}`} alt={data.title} className="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105" />
              ) : (
                <div className="h-full w-full grid place-items-center text-zinc-400 bg-zinc-100">Brak zdjęcia</div>
              )}
              <button onClick={onFav} className={cn("absolute top-3 right-3 p-2 rounded-xl transition-all", fav ? "bg-red-500 text-white" : "bg-white/80 text-zinc-800 hover:bg-white")}> <Icon name="Heart" className={cn("h-4 w-4", fav && "fill-current")} /> </button>
              <span className="absolute left-3 top-3 bg-black/70 text-white backdrop-blur rounded-full px-2.5 py-0.5 text-xs">{data.type || "Nieruchomość"}</span>
            </div>
            <CardHeader>
              <CardTitle className="text-xl">{data.title}</CardTitle>
              <div className="flex items-center gap-2 text-zinc-500 text-sm"><Icon name="MapPin" /> {data.city}{data.district?` • ${data.district}`:""} • {data.area ?? "-"} m² • {data.rooms ?? "-"} pokoje</div>
            </CardHeader>
            <CardContent className="flex items-center justify-between">
              <div className="text-2xl font-semibold">{currency(data.price)}</div>
              <a href="oferty.html"><Button variant="outline" className="rounded-xl">Szczegóły</Button></a>
            </CardContent>
          </Card>
        </div>
      );
    }

    // ---------- SHORTS / ABOUT / TESTIMONIALS / CONTACT / FOOTER ----------
    function Shorts(){ return null } // (opcjonalnie zostaw pusto – nie wpływa na backend)
    function About({t}) {
      return (
        <section id="about" className="w-full py-24">
          <div className="mx-auto max-w-7xl px-4 grid md:grid-cols-2 gap-12 items-center">
            <div className="flex flex-col items-center text-center md:items-start md:text-left">
              <h3 className="text-3xl md:text-4xl font-semibold tracking-tight">{t.about}</h3>
              <p className="text-zinc-600 mt-4 leading-relaxed">{t.story}</p>
              <div className="mt-6 grid grid-cols-2 md:grid-cols-4 gap-3">
                {t.values.map((v) => <div key={v} className="rounded-2xl border bg-white/70 backdrop-blur p-4 text-center shadow-sm"><Icon name="Star" className="mx-auto text-blue-500" /><div className="mt-1 text-sm font-medium">{v}</div></div>)}
              </div>
            </div>
            <div className="flex justify-center items-center"><img src="https://i.imgur.com/SKLVSRG.png" className="w-64 rounded-2xl shadow-xl border-4 border-white" alt="Klaudia Zacharska"/></div>
          </div>
        </section>
      );
    }
    function Testimonials(){ return null }
    function Contact({t}) {
      return (
        <section id="contact" className="w-full py-24">
          <div className="mx-auto max-w-7xl px-4 grid md:grid-cols-2 gap-10 items-start">
            <div className="flex flex-col items-center text-center md:items-start md:text-left">
              <h3 className="text-3xl md:text-4xl font-semibold tracking-tight">{t.contact}</h3>
              <p className="text-zinc-600 mt-2">Skontaktuj się z nami – odpowiemy jeszcze dziś.</p>
              <div className="mt-6 space-y-3 text-blue-600">
                <div className="flex items-center gap-2"><Icon name="Phone"/> <span className="text-zinc-800">534 845 780</span></div>
                <div className="flex items-center gap-2"><Icon name="Mail"/> <span className="text-zinc-800">centrumnieruchomoscikz@op.pl</span></div>
                <div className="flex items-center gap-2"><Icon name="MapPin"/> <span className="text-zinc-800">ul. Starzyńskiego 3, Słupsk</span></div>
              </div>
            </div>
            <Card className="rounded-3xl bg-white/70 backdrop-blur-xl border-zinc-200/70 shadow-[0_20px_60px_-25px_rgba(0,0,0,.2)]">
              <CardHeader><CardTitle>Formularz kontaktowy</CardTitle></CardHeader>
              <CardContent><div className="p-6 text-zinc-500">Tu możesz dodać swój formularz / integrację.</div></CardContent>
            </Card>
          </div>
        </section>
      );
    }
    function Footer() {
      return (
        <footer className="py-10 border-t bg-white/60 backdrop-blur">
          <div className="mx-auto max-w-7xl px-4 flex flex-col items-center text-center gap-4 text-sm text-zinc-600">
            <div className="flex items-center gap-3">
              <img src="https://i.imgur.com/UwnwhuV.png" alt="Centrum nieruchomości Logo" className="h-10 w-10" />
              <div>
                <div className="font-semibold tracking-tight">© {new Date().getFullYear()} Centrum nieruchomości</div>
                <div className="text-xs text-zinc-600">Zacharska Klaudia</div>
              </div>
            </div>
            <div className="flex items-center gap-4"><a href="#" className="hover:text-blue-600">Polityka prywatności</a><a href="#" className="hover:text-blue-600">RODO</a></div>
          </div>
        </footer>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
